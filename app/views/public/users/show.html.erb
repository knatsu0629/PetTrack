<h2><%= @user.name %> さんのプロフィール</h2>

<% unless current_user == @user %>
  <% if current_user.following?(@user) %>
    <%= button_to 'フォロー解除', relationship_path(current_user.active_relationships.find_by(followed_id: @user.id)),
                  method: :delete,
                  class: "btn btn-outline-danger",
                  data: { confirm: "本当にフォローを解除しますか？" } %>
  <% else %>
    <%= button_to 'フォローする', relationships_path(followed_id: @user.id),
                  method: :post,
                  class: "btn btn-primary" %>
  <% end %>
<% end %>


<% if @user.avatar.attached? %>
  <%= image_tag @user.avatar.variant(resize: "100x100"), class: "rounded-circle", alt: @user.name %>
<% else %>
  <p>プロフィール画像は未登録です</p>
<% end %>

<p>メールアドレス: <%= @user.email %></p>

<% if @user.introduction.present? %>
  <h3>自己紹介</h3>
  <p><%= simple_format(@user.introduction) %></p>
<% else %>
  <p>自己紹介はまだありません。</p>
<% end %>

<div style="margin-top: 2em;">
  <%= link_to 'フォロー一覧', followings_user_path(@user) %> |
  <%= link_to 'フォロワー一覧', followers_user_path(@user) %>
</div>


<div style="margin-top: 2em;">
 <%= link_to 'ユーザー情報を編集', edit_user_path(current_user) %> |
 <%= link_to '退会', user_path(current_user), method: :delete, data: { confirm: '本当に退会しますか？' } %>
</div>

<%= link_to '戻る', request.referer || root_path, class: 'btn btn-secondary', style: 'margin-top: 20px;' %>
